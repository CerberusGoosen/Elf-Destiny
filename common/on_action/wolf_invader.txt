three_year_playable_pulse = {    
    on_actions = {
        wolf_invader_on_action
    }
    
}

yearly_playable_pulse = { 
    on_actions = {
        unlock_direwolf_riders_innovation
    }
}

on_death = {
    on_actions = { 
        on_killed_by_direwolf
    }
}

wolf_invader_on_action = {
    trigger = {
        is_ai = no
        is_target_in_global_variable_list = {
            name = unavailable_unique_decisions
            target = flag:flag_grand_portal_restored
        }
        NOT = { 
            has_global_variable = wolf_invader_cooldown
        }
    }
    effect = {
        set_global_variable = {
            name = wolf_invader_cooldown
            days = 29220
            value = yes
        }        
        trigger_event = { 
            id = wolf_invader.0001
        }
    }    
}

on_killed_by_direwolf = { 
    trigger = { 
        is_ai = no
        OR = { 
            has_character_flag = elflord_dealing_with_direwolf
            has_character_flag = direwolf_event_heir_continuation
        }
    }
    effect = { 
        primary_heir = { 
            trigger_event = { 
                id = wolf_invader.2001
            }
        }
    }
}

unlock_direwolf_riders_innovation = { 
    trigger = {
        is_ai = no
        capital_county = { 
            has_county_modifier = has_direwolf_population_modifier
        }
    }
    effect = {
        trigger_event = { 
            id = wolf_invader.00084
        }
    }
}
